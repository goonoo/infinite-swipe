/*!
 * infinite-swipe 1.1.9
 * https://github.com/goonoo/infinite-swipe
 *
 * infinite swipe is fork of https://github.com/goonoo/recopick-swipe
 *
 * (c) 2015 goonoo (mctenshi@gmail.com)
 * Released under the MIT license
 */
!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";var b=function(){for(var a=document.createElement("div"),b="transform WebkitTransform MozTransform OTransform msTransform".split(" "),c="transition WebkitTransition MozTransition OTransition msTransition".split(" "),d=0;d<b.length;d++)if(void 0!==a.style[b[d]]&&void 0!==a.style[c[d]])return!0;return!1}(),c=function(a,c,d){b?a.css({"-webkit-transform":"translate3D("+c+"px, 0, 0)","-moz-transform":"translate3D("+c+"px, 0, 0)","-ms-transform":"translate3D("+c+"px, 0, 0)","-o-transform":"translate3D("+c+"px, 0, 0)",transform:"translate3D("+c+"px, 0, 0)"}):a.css("opacity",.7).animate({"margin-left":c+"px",opacity:1},d.transition_ms)},d=function(b,c,d){b.animate({opacity:0},d.transition_ms,function(){a(this).css({"margin-left":c+"px"}),a(this).animate({opacity:1})})},e=function(a,b,c){a.css({"margin-left":b+"px"})},f=function(a){switch(a){case"none":return e;case"slide":return c;case"fadeIn":return d;default:return c}},g=function(b,c){c=a.extend({$target_wrap:null,$target:null,$prev:null,$next:null,$curr:null,$autoswipe_pause_el:null,total:1,transition_ms:null,animation_type:"slide",infinite:!1,autoswipe_seconds:0,onPage:null},c),null===c.transition_ms&&(c.transition_ms="slide"===c.animation_type?200:0),this.$el=b,this.$target_wrap=c.$target_wrap||b,this.$target=c.$target||b,this.$autoswipe_pause_el=c.$autoswipe_pause_el||b,this.p=1,this.offset=0,this.total=c.total,this.curr_px=0,this.disabled_touch=!1,this.options=c,this.init()};g.prototype={_setTransitionDuration:function(a){var b=this.$target_wrap.get(0);b.style.webkitTransitionDuration=a+"ms",b.style.mozTransitionDuration=a+"ms",b.style.msTransitionDuration=a+"ms",b.style.oTransitionDuration=a+"ms",b.style.transitionDuration=a+"ms"},init:function(){if(this.$el.addClass("infinite-swipe-stage"),this.$target_wrap.addClass("infinite-swipe-target-wrap"),this._setTransitionDuration(this.options.transition_ms),this.$target.addClass("infinite-swipe-target"),this.options.infinite){var a=this.$target.clone().attr("aria-hidden",!0).addClass("infinite-swipe-target-clone").css("left","-"+100*this.options.total+"%"),b=this.$target.clone().attr("aria-hidden",!0).addClass("infinite-swipe-target-clone").css("left",100*this.options.total+"%");a.insertBefore(this.$target),b.insertBefore(this.$target),this.$target=this.$target.parent().find(".infinite-swipe-target")}this.addListeners(),!this.options.infinite&&this.options.$prev&&this.options.$prev.toggleClass("disabled",1===this.p),this.options.autoswipe_seconds>0&&this.initAutoswipe()},initAutoswipe:function(a){a&&(this.options.autoswipe_seconds=a);var b=this;this._as_next=function(){b._as_timeout_id&&clearTimeout(b._as_timeout_id),b._as_timeout_id=setTimeout(function(){b._as_pause||b.swipeNext(),b._as_timeout_id=null,b._as_next()},1e3*b.options.autoswipe_seconds)},this._as_resume_event=function(){b._as_next()},this._as_pause_event=function(){b._as_timeout_id&&(clearTimeout(b._as_timeout_id),b._as_timeout_id=null)},this._as_next(),this.$autoswipe_pause_el.on("mouseenter focusin",this._as_pause_event).on("mouseleave focusout",this._as_resume_event)},onPrev:function(a){a.preventDefault(),a.stopPropagation(),(1!==this.p||this.options.infinite)&&this.swipePrev()},onNext:function(a){a.preventDefault(),a.stopPropagation(),(this.p!==this.total||this.options.infinite)&&this.swipeNext()},onDragLeft:function(b,c,d){if(!this._swiped){if(a(window).on("touchmove",this.disabled_touch),Math.abs(c)>5&&(this.p!==this.total||this.options.infinite))return b.preventDefault(),b.stopPropagation(),this._swiped=!0,this.curr_px=0,this._setTransitionDuration(0),void this.swipeNext();var e=d;this.animate_px(e)}},onDragRight:function(b,c,d){if(!this._swiped){if(a(window).on("touchmove",this.disabled_touch),Math.abs(c)>5&&(this.p!==this.total||this.options.infinite))return b.preventDefault(),b.stopPropagation(),this._swiped=!0,this.curr_px=0,this._setTransitionDuration(0),void this.swipePrev();var e=d;this.animate_px(e)}},onDragStart:function(a){this._setTransitionDuration(0)},onDragEnd:function(b){this._setTransitionDuration(this.options.transition_ms),this._swiped||this.animate(),this._swiped=!1,a(window).off("touchmove",this.disabled_touch)},onSwipeTotal:function(b,c){var d=this;this.total!==c&&(this.total=c,this.p>this.total&&(this.p=this.total),this.getWidth(!0),this.offset=0,this.animate(),this.$target.each(function(b){a(this).css("left",d.total*(d.offset+b)*100+"%")}))},onSwipePage:function(a,b){b<1||b>this.total||(this.p=b,this.animate())},onWindowResize:function(a){var b=this;setTimeout(function(){b.getWidth()!==b.getWidth(!0)&&(b.$target_wrap.addClass("infinite-swipe-resizing"),b.animate(0,function(){b.$target_wrap.removeClass("infinite-swipe-resizing")}))},200)},addListeners:function(){var b=this,c="touchstart click";navigator.userAgent.indexOf("Android")>=0&&(c="touchstart"),this.options.$prev&&this.options.$prev.on(c,a.proxy(this.onPrev,this)),this.options.$next&&this.options.$next.on(c,a.proxy(this.onNext,this)),this._dragleft_event=function(){b.onDragLeft.apply(b,arguments)},this._dragright_event=function(){b.onDragRight.apply(b,arguments)},this._dragstart_event=function(){b.onDragStart.apply(b,arguments)},this._dragend_event=function(){b.onDragEnd.apply(b,arguments)},this._swipetotal_event=function(){b.onSwipeTotal.apply(b,arguments)},this._swipepage_event=function(){b.onSwipePage.apply(b,arguments)},this.$el.on("dragleft",this._dragleft_event).on("dragright",this._dragright_event).on("dragstart",this._dragstart_event).on("dragend",this._dragend_event).on("swipe_total",this._swipetotal_event).on("swipe_page",this._swipepage_event),this._resize_event=function(){b.onWindowResize()},a(window).on("resize orientationchange",this._resize_event)},removeListeners:function(){var b="touchstart click";navigator.userAgent.indexOf("Android")>=0&&(b="touchstart"),this.options.$prev&&this.options.$prev.off(b,a.proxy(this.onPrev,this)),this.options.$next&&this.options.$next.off(b,a.proxy(this.onNext,this)),this.$el.off("dragleft",this._dragleft_event).off("dragright",this._dragright_event).off("dragstart",this._dragstart_event).off("dragend",this._dragend_event).off("swipe_total",this._swipetotal_event).off("swipe_page",this._swipepage_event),a(window).off("resize orientationchange",this._resize_event)},getWidth:function(a){return!a&&this._w||(this._w=this.options.getWidth?this.options.getWidth():this.$target.width()),this._w},swipePrev:function(){this.animate(-1)},swipeNext:function(){this.animate(1)},animate:function(b,c){var d=this,e=this.p;b&&(this.p+=b),this.curr_px>30?this.p--:this.curr_px<-30&&this.p++,this.options.infinite?this.p===this.total+1?(this.p=1,this.offset++,this.$target.each(function(b){var c=d.total*(d.offset+b-1)*100;a(this).css("left",c+"%")})):0===this.p&&(this.p=this.total,this.offset--,this.$target.each(function(b){var c=d.total*(d.offset+b-1)*100;a(this).css("left",c+"%")})):this.p=Math.max(Math.min(this.p,this.total),1),this.curr_px=0;var g=-(this.p-1+this.offset*this.total)*this.getWidth(!0)/this.total;f(this.options.animation_type)(this.$target_wrap,g,this.options),this.options.infinite||(this.options.$prev&&this.options.$prev.toggleClass("disabled",1===this.p),this.options.$next&&this.options.$next.toggleClass("disabled",this.p===this.total)),this.options.$curr&&this.options.$curr.text(this.p),e!=this.p&&this.options.onPage&&this.options.onPage(this.p),c&&setTimeout(c,this.options.transition_ms)},animate_px:function(a){this.curr_px=a;var b=-(this.p-1+this.offset*this.total)*this.getWidth()/this.total+a;f(this.options.animation_type)(this.$target_wrap,b,this.options)},destroy:function(){this.$el.removeClass("infinite-swipe-stage"),this.$target_wrap.removeClass("infinite-swipe-target-wrap"),this.$target.filter(".infinite-swipe-target-clone").remove(),this.$el.find(".infinite-swipe-target").removeClass("infinite-swipe-target"),this.removeListeners(),this.options.autoswipe_seconds>0&&(this._as_timeout_id&&(clearTimeout(this._as_timeout_id),this._as_timeout_id=null),this.$el.off("mouseenter focusin",this._as_pause_event).off("mouseleave focusout",this._as_resume_event))},pause:function(){this._as_pause=!0},resume:function(){this._as_pause=!1,this._as_next()}},a.fn.infiniteSwipeEvent=function(){var b,c=a(this),d=!1,e=null,f={x:null,y:null},g={x:null,y:null};c.on("touchstart",function(a){var c=a.originalEvent.touches[0].pageX,h=a.originalEvent.touches[0].pageY;d=!0,e=null,f.x=g.x=c,f.y=g.y=h,b=a.timeStamp}).on("touchend touchleave",function(a){d&&c.trigger("dragend"),d=!1}).on("touchmove",function(a){if(d&&"y"!==e){var h=a.originalEvent.touches[0].pageX,i=a.originalEvent.touches[0].pageY,j={x:g.x-h,y:g.y-i};if(!e){if("y"===(e=Math.abs(j.x)>=Math.abs(j.y)?"x":"y"))return;c.trigger("dragstart")}var k=a.timeStamp-b,l={x:f.x-h,y:f.y-i},m=Math.abs(j.x/k);j.x>0?c.trigger("dragleft",[m,-l.x]):j.x<0&&c.trigger("dragright",[m,-l.x]),g.x=h,g.y=i,b=a.timeStamp}})},a.fn.infiniteSwipe=function(b,c){return this.each(function(){if("string"==typeof b){var d=a(this).data("infiniteswipe");d&&d[b](c)}else a(this).infiniteSwipeEvent(),a(this).data("infiniteswipe",new g(a(this),b))})}});